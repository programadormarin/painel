"use strict";angular.module("myApp.produtos",["ngRoute","ngInputTypeFile","angular-cloudinary"]).config(["$routeProvider",function(o){o.when("/produtos",{templateUrl:"modules/produtos/index.html",controller:"ProdutosController"}).when("/produtos/adicionar",{templateUrl:"modules/produtos/add.html",controller:"ProdutosController"}).when("/produtos/editar/:id",{templateUrl:"modules/produtos/edit.html",controller:"ProdutosController"})}]).controller("ProdutosController",["$scope","$routeParams","$location","api","cloudinary",function(o,t,e,r,a){o.curPage=1,o.pageSize=12,o.load=function(){r.get("produto?page="+o.curPage+"&limit="+o.pageSize+"&t="+new Date).then(function(t){o.linhas=t.data})},o.upload=function(){var t=o.produto;a.upload(t.imagem[0],{}).then(function(e){t.imagem=e.data,o.add(t)})},o.add=function(){var t=o.produto;r.post("produto",t).then(function(t){201===t.status?(e.url("/produtos"),o.load()):o.status={type:"danger",message:"Erro cadastrando produto, tente novamente mais tarde"}})},o["delete"]=function(t){if(confirm("Você deseja realmente apagar o produto?\nEste procedimento é irreversível!")){var e=o.linhas.data[t];r["delete"]("produto/"+e._id).then(function(e){204==e.status?(o.status={type:"success",message:"produto removido com sucesso!"},o.linhas.data.splice(t,1)):o.status={type:"danger",message:"Erro removendo produto, tente novamente mais tarde"}})}},o.edit=function(){r.put("produto/"+t.id,o.produto).success(function(t){o.status={type:"success",message:"produto atualizado com sucesso!"}}).error(function(){o.status={type:"danger",message:"Ocorreu um erro atualizando os dados do produto, tente novamente mais tarde"}})},o.get=function(){r.get("produto/"+t.id).then(function(t){o.produto=t.data.data})}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZXMvcHJvZHV0b3MvaW5kZXguanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwid2hlbiIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsIiRzY29wZSIsIiRyb3V0ZVBhcmFtcyIsIiRsb2NhdGlvbiIsIiRhcGkiLCIkY2xvdWRpbmFyeSIsImN1clBhZ2UiLCJwYWdlU2l6ZSIsImxvYWQiLCJnZXQiLCJEYXRlIiwidGhlbiIsInJlc3VsdCIsImxpbmhhcyIsInVwbG9hZCIsIiRwcm9kdXRvIiwicHJvZHV0byIsImltYWdlbSIsInJlc3AiLCJkYXRhIiwiYWRkIiwicG9zdCIsInN0YXR1cyIsInVybCIsInR5cGUiLCJtZXNzYWdlIiwiaWQiLCJjb25maXJtIiwidG9EZWxldGUiLCJfaWQiLCJzcGxpY2UiLCJlZGl0IiwicHV0Iiwic3VjY2VzcyIsImVycm9yIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUVBQSxTQUNLQyxPQUFPLGtCQUFtQixVQUFXLGtCQUFtQix1QkFFeERDLFFBQVEsaUJBQWtCLFNBQVVDLEdBQ2pDQSxFQUNLQyxLQUFLLGFBQ0ZDLFlBQWEsOEJBQ2JDLFdBQVksdUJBRWZGLEtBQUssdUJBQ0ZDLFlBQWEsNEJBQ2JDLFdBQVksdUJBRWZGLEtBQUssd0JBQ0ZDLFlBQWEsNkJBQ2JDLFdBQVksMEJBS3ZCQSxXQUFXLHNCQUF1QixTQUFVLGVBQWdCLFlBQWEsTUFBTyxhQUFjLFNBQVVDLEVBQVFDLEVBQWNDLEVBQVdDLEVBQU1DLEdBQ3hJSixFQUFPSyxRQUFXLEVBQ2xCTCxFQUFPTSxTQUFXLEdBRWxCTixFQUFPTyxLQUFPLFdBQ1ZKLEVBQ0tLLElBQUksZ0JBQWtCUixFQUFPSyxRQUFVLFVBQVlMLEVBQU9NLFNBQVcsTUFBUSxHQUFJRyxPQUNqRkMsS0FBSyxTQUFVQyxHQUNaWCxFQUFPWSxPQUFVRCxFQUFXLFFBSXhDWCxFQUFPYSxPQUFTLFdBQ1osR0FBSUMsR0FBV2QsRUFBT2UsT0FFdEJYLEdBQ0tTLE9BQU9DLEVBQVNFLE9BQU8sT0FDdkJOLEtBQUssU0FBVU8sR0FDWkgsRUFBU0UsT0FBU0MsRUFBS0MsS0FFdkJsQixFQUFPbUIsSUFBSUwsTUFJdkJkLEVBQU9tQixJQUFNLFdBQ1QsR0FBSUwsR0FBV2QsRUFBT2UsT0FFdEJaLEdBQ0tpQixLQUFLLFVBQVdOLEdBQ2hCSixLQUFLLFNBQVVRLEdBQ1EsTUFBaEJBLEVBQUtHLFFBQ0xuQixFQUFVb0IsSUFBSSxhQUNkdEIsRUFBT08sUUFFUFAsRUFBT3FCLFFBQ0hFLEtBQU0sU0FDTkMsUUFBUywyREFNN0J4QixFQUFBQSxVQUFnQixTQUFVeUIsR0FDdEIsR0FBSUMsUUFBUSw4RUFBK0UsQ0FDdkYsR0FBSUMsR0FBVzNCLEVBQU9ZLE9BQU9NLEtBQUtPLEVBRWxDdEIsR0FBQUEsVUFDWSxXQUFhd0IsRUFBU0MsS0FDN0JsQixLQUFLLFNBQVVRLEdBQ08sS0FBZkEsRUFBS0csUUFDTHJCLEVBQU9xQixRQUNIRSxLQUFNLFVBQ05DLFFBQVMsaUNBR2J4QixFQUFPWSxPQUFPTSxLQUFLVyxPQUFPSixFQUFJLElBRTlCekIsRUFBT3FCLFFBQ0hFLEtBQU0sU0FDTkMsUUFBUywwREFPakN4QixFQUFPOEIsS0FBTyxXQUNWM0IsRUFDSzRCLElBQUksV0FBYTlCLEVBQWF3QixHQUFJekIsRUFBT2UsU0FDekNpQixRQUFRLFNBQVVkLEdBQ2ZsQixFQUFPcUIsUUFDSEUsS0FBTSxVQUNOQyxRQUFTLHFDQUdoQlMsTUFBTSxXQUNIakMsRUFBT3FCLFFBQ0hFLEtBQU0sU0FDTkMsUUFBUyxrRkFLekJ4QixFQUFPUSxJQUFNLFdBQ1RMLEVBQ0tLLElBQUksV0FBYVAsRUFBYXdCLElBQzlCZixLQUFLLFNBQVVRLEdBQ1psQixFQUFPZSxRQUFXRyxFQUFLQSxLQUFTIiwiZmlsZSI6Im1vZHVsZXMvcHJvZHV0b3MvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdteUFwcC5wcm9kdXRvcycsIFsnbmdSb3V0ZScsICduZ0lucHV0VHlwZUZpbGUnLCAnYW5ndWxhci1jbG91ZGluYXJ5J10pXG5cbiAgICAuY29uZmlnKFsnJHJvdXRlUHJvdmlkZXInLCBmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIpIHtcbiAgICAgICAgJHJvdXRlUHJvdmlkZXJcbiAgICAgICAgICAgIC53aGVuKCcvcHJvZHV0b3MnLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtb2R1bGVzL3Byb2R1dG9zL2luZGV4Lmh0bWwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdQcm9kdXRvc0NvbnRyb2xsZXInXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oJy9wcm9kdXRvcy9hZGljaW9uYXInLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtb2R1bGVzL3Byb2R1dG9zL2FkZC5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnUHJvZHV0b3NDb250cm9sbGVyJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKCcvcHJvZHV0b3MvZWRpdGFyLzppZCcsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ21vZHVsZXMvcHJvZHV0b3MvZWRpdC5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnUHJvZHV0b3NDb250cm9sbGVyJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgO1xuICAgIH1dKVxuXG4gICAgLmNvbnRyb2xsZXIoJ1Byb2R1dG9zQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRyb3V0ZVBhcmFtcycsICckbG9jYXRpb24nLCAnYXBpJywgJ2Nsb3VkaW5hcnknLCBmdW5jdGlvbiAoJHNjb3BlLCAkcm91dGVQYXJhbXMsICRsb2NhdGlvbiwgJGFwaSwgJGNsb3VkaW5hcnkpIHtcbiAgICAgICAgICAgICRzY29wZS5jdXJQYWdlICA9IDE7XG4gICAgICAgICAgICAkc2NvcGUucGFnZVNpemUgPSAxMjtcblxuICAgICAgICAgICAgJHNjb3BlLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJGFwaVxuICAgICAgICAgICAgICAgICAgICAuZ2V0KCdwcm9kdXRvP3BhZ2U9JyArICRzY29wZS5jdXJQYWdlICsgJyZsaW1pdD0nICsgJHNjb3BlLnBhZ2VTaXplICsgJyZ0PScgKyBuZXcgRGF0ZSgpKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGluaGFzID0gKHJlc3VsdC5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAkc2NvcGUudXBsb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyICRwcm9kdXRvID0gJHNjb3BlLnByb2R1dG87XG5cbiAgICAgICAgICAgICAgICAkY2xvdWRpbmFyeVxuICAgICAgICAgICAgICAgICAgICAudXBsb2FkKCRwcm9kdXRvLmltYWdlbVswXSwge30pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkcHJvZHV0by5pbWFnZW0gPSByZXNwLmRhdGE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGQoJHByb2R1dG8pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICRzY29wZS5hZGQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyICRwcm9kdXRvID0gJHNjb3BlLnByb2R1dG87XG5cbiAgICAgICAgICAgICAgICAkYXBpXG4gICAgICAgICAgICAgICAgICAgIC5wb3N0KCdwcm9kdXRvJywgJHByb2R1dG8pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdGF0dXMgPT09IDIwMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbi51cmwoJy9wcm9kdXRvcycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5sb2FkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zdGF0dXMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdkYW5nZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRXJybyBjYWRhc3RyYW5kbyBwcm9kdXRvLCB0ZW50ZSBub3ZhbWVudGUgbWFpcyB0YXJkZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICRzY29wZS5kZWxldGUgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29uZmlybSgnVm9jw6ogZGVzZWphIHJlYWxtZW50ZSBhcGFnYXIgbyBwcm9kdXRvP1xcbkVzdGUgcHJvY2VkaW1lbnRvIMOpIGlycmV2ZXJzw612ZWwhJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvRGVsZXRlID0gJHNjb3BlLmxpbmhhcy5kYXRhW2lkXTtcblxuICAgICAgICAgICAgICAgICAgICAkYXBpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZGVsZXRlKCdwcm9kdXRvLycgKyB0b0RlbGV0ZS5faWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnN0YXR1cyA9PSAyMDQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN0YXR1cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdwcm9kdXRvIHJlbW92aWRvIGNvbSBzdWNlc3NvISdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGluaGFzLmRhdGEuc3BsaWNlKGlkLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3RhdHVzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2RhbmdlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRXJybyByZW1vdmVuZG8gcHJvZHV0bywgdGVudGUgbm92YW1lbnRlIG1haXMgdGFyZGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgJHNjb3BlLmVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJGFwaVxuICAgICAgICAgICAgICAgICAgICAucHV0KCdwcm9kdXRvLycgKyAkcm91dGVQYXJhbXMuaWQsICRzY29wZS5wcm9kdXRvKVxuICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN0YXR1cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ3Byb2R1dG8gYXR1YWxpemFkbyBjb20gc3VjZXNzbyEnXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN0YXR1cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZGFuZ2VyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnT2NvcnJldSB1bSBlcnJvIGF0dWFsaXphbmRvIG9zIGRhZG9zIGRvIHByb2R1dG8sIHRlbnRlIG5vdmFtZW50ZSBtYWlzIHRhcmRlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAkc2NvcGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICRhcGlcbiAgICAgICAgICAgICAgICAgICAgLmdldCgncHJvZHV0by8nICsgJHJvdXRlUGFyYW1zLmlkKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1dG8gPSAoZGF0YS5kYXRhLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICBdKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
