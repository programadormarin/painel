"use strict";function ProdutosController(t,o,e,a,r){t.curPage=1,t.pageSize=12;var n={headers:{Authorization:localStorage.getItem("token"),Site:localStorage.getItem("site")}};t.load=function(){a.get($('meta[name="api"]').attr("content")+"produto?page="+t.curPage+"&limit="+t.pageSize,n).then(function(o){t.linhas=o.data;for(var e=new Array,a=1;a<=o.data.pageCount;a++)e.push(a);t.paginas=e})},t.categories=function(){a.get($('meta[name="api"]').attr("content")+"site/"+n.headers.Site,n).then(function(o){t.site=o.data.data})},t.add=function(){var o=t.produto;o.categoria={titulo:t.produtoForm.categoria.titulo,categoria:{titulo:t.produtoForm.subCategoria.titulo}},r.upload({url:$('meta[name="api"]').attr("content")+"produto",data:o,headers:n.headers}).then(function(o){e.url("/produtos"),t.load()},function(o){t.status={type:"danger",message:"Erro cadastrando produto, tente novamente mais tarde"}},function(t){var o=parseInt(100*t.loaded/t.total);console.log("progress: "+o+"% "+t.config.data.file.name)})},t["delete"]=function(o){if(confirm("Você deseja realmente apagar o produto?\nEste procedimento é irreversível!")){var e=t.linhas.data[o];a["delete"]($('meta[name="api"]').attr("content")+"produto/"+e._id,n).then(function(e){204==e.status?(t.status={type:"success",message:"produto removido com sucesso!"},t.linhas.data.splice(o,1)):t.status={type:"danger",message:"Erro removendo produto, tente novamente mais tarde"}})}},t.edit=function(){var e=t.produto;e.categoria={titulo:t.produtoForm.categoria.titulo,categoria:{titulo:t.produtoForm.subCategoria.titulo}},a.put($('meta[name="api"]').attr("content")+"produto/"+o.id,e,n).success(function(o){t.status={type:"success",message:"produto atualizado com sucesso!"}}).error(function(){t.status={type:"danger",message:"Ocorreu um erro atualizando os dados do produto, tente novamente mais tarde"}})},t.get=function(){a.get($('meta[name="api"]').attr("content")+"produto/"+o.id,n).then(function(o){t.produto=o.data.data})},t.search=function(){var o=$('meta[name="api"]').attr("content")+"busca/?page="+t.curPage+"&limit="+t.pageSize+"&busca="+t.busca;a.get(o,n).then(function(o){t.linhas=o.data;for(var e=new Array,a=1;a<=o.data.pageCount;a++)e.push(a);t.paginas=e})}}angular.module("myApp.produtos",["ngRoute","ngFileUpload"]).config(["$routeProvider",function(t){t.when("/produtos",{templateUrl:"modules/produtos/index.html",controller:"ProdutosController"}).when("/produtos/adicionar",{templateUrl:"modules/produtos/add.html",controller:"ProdutosController"}).when("/produtos/editar/:id",{templateUrl:"modules/produtos/edit.html",controller:"ProdutosController"})}]).controller("ProdutosController",["$scope","$routeParams","$location","$http","Upload",ProdutosController]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2R1dG9zL2luZGV4LmpzIl0sIm5hbWVzIjpbIlByb2R1dG9zQ29udHJvbGxlciIsIiRzY29wZSIsIiRyb3V0ZVBhcmFtcyIsIiRsb2NhdGlvbiIsIiRodHRwIiwiJHVwbG9hZCIsImN1clBhZ2UiLCJwYWdlU2l6ZSIsImNvbmZpZyIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIlNpdGUiLCJsb2FkIiwiZ2V0IiwiJCIsImF0dHIiLCJ0aGVuIiwicmVzdWx0IiwibGluaGFzIiwicGFnaW5hcyIsIkFycmF5IiwiaSIsImRhdGEiLCJwYWdlQ291bnQiLCJwdXNoIiwiY2F0ZWdvcmllcyIsInNpdGUiLCJhZGQiLCIkcHJvZHV0byIsInByb2R1dG8iLCJjYXRlZ29yaWEiLCJ0aXR1bG8iLCJwcm9kdXRvRm9ybSIsInN1YkNhdGVnb3JpYSIsInVwbG9hZCIsInVybCIsInJlc3AiLCJzdGF0dXMiLCJ0eXBlIiwibWVzc2FnZSIsImV2dCIsInByb2dyZXNzUGVyY2VudGFnZSIsInBhcnNlSW50IiwibG9hZGVkIiwidG90YWwiLCJjb25zb2xlIiwibG9nIiwiZmlsZSIsIm5hbWUiLCJpZCIsImNvbmZpcm0iLCJ0b0RlbGV0ZSIsIl9pZCIsInNwbGljZSIsImVkaXQiLCJwdXQiLCJzdWNjZXNzIiwiZXJyb3IiLCJzZWFyY2giLCJidXNjYSIsImFuZ3VsYXIiLCJtb2R1bGUiLCIkcm91dGVQcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiXSwibWFwcGluZ3MiOiJBQUFBLFlBRUEsU0FBU0Esb0JBQW9CQyxFQUFRQyxFQUFjQyxFQUFXQyxFQUFPQyxHQUNqRUosRUFBT0ssUUFBVyxFQUNsQkwsRUFBT00sU0FBVyxFQU9sQixJQUFJQyxJQUNBQyxTQUNJQyxjQUFlQyxhQUFhQyxRQUFRLFNBQ3BDQyxLQUFNRixhQUFhQyxRQUFRLFNBT25DWCxHQUFPYSxLQUFPLFdBQ1ZWLEVBQ0tXLElBQUlD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dEIsR0FBT29CLFFBQVVBLEtBS2pDeUMsUUFDS0MsT0FBTyxrQkFBbUIsVUFBVyxpQkFFckN2RCxRQUFRLGlCQUFrQixTQUFVd0QsR0FDakNBLEVBQ0tDLEtBQUssYUFDRkMsWUFBYSw4QkFDYkMsV0FBWSx1QkFFZkYsS0FBSyx1QkFDRkMsWUFBYSw0QkFDYkMsV0FBWSx1QkFFZkYsS0FBSyx3QkFDRkMsWUFBYSw2QkFDYkMsV0FBWSwwQkFLdkJBLFdBQVcsc0JBQXVCLFNBQVUsZUFBZ0IsWUFBYSxRQUFTLFNBQVVuRSIsImZpbGUiOiJwcm9kdXRvcy9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gUHJvZHV0b3NDb250cm9sbGVyICgkc2NvcGUsICRyb3V0ZVBhcmFtcywgJGxvY2F0aW9uLCAkaHR0cCwgJHVwbG9hZCkge1xuICAgICRzY29wZS5jdXJQYWdlICA9IDE7XG4gICAgJHNjb3BlLnBhZ2VTaXplID0gMTI7XG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmFsIGNvbmZpZ1xuICAgICAqXG4gICAgICogQHR5cGUge3toZWFkZXJzOiB7QXV0aG9yaXphdGlvbiwgU2l0ZX19fVxuICAgICAqL1xuICAgIHZhciBjb25maWcgPSB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpLFxuICAgICAgICAgICAgU2l0ZTogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3NpdGUnKVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENhcnJlZ2FyIFByb2R1dG9zXG4gICAgICovXG4gICAgJHNjb3BlLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRodHRwXG4gICAgICAgICAgICAuZ2V0KCQoJ21ldGFbbmFtZT1cImFwaVwiXScpLmF0dHIoJ2NvbnRlbnQnKSArICdwcm9kdXRvP3BhZ2U9JyArICRzY29wZS5jdXJQYWdlICsgJyZsaW1pdD0nICsgJHNjb3BlLnBhZ2VTaXplLCBjb25maWcpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmxpbmhhcyA9IChyZXN1bHQuZGF0YSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgcGFnaW5hcyA9IG5ldyBBcnJheSgpO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaT0xOyBpIDw9IHJlc3VsdC5kYXRhLnBhZ2VDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2luYXMucHVzaChpKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUucGFnaW5hcyA9IHBhZ2luYXM7XG4gICAgICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ2FycmVnYSBhcyBjYXRlZ29yaWFzIGRvIHNpdGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSBzaXRlXG4gICAgICovXG4gICAgJHNjb3BlLmNhdGVnb3JpZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJGh0dHBcbiAgICAgICAgICAgIC5nZXQoJCgnbWV0YVtuYW1lPVwiYXBpXCJdJykuYXR0cignY29udGVudCcpICsgJ3NpdGUvJyArIGNvbmZpZy5oZWFkZXJzLlNpdGUsIGNvbmZpZylcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNpdGUgPSBkYXRhLmRhdGEuZGF0YTtcbiAgICAgICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDYWRhc3RyYXIgUHJvZHV0b1xuICAgICAqL1xuICAgICRzY29wZS5hZGQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciAkcHJvZHV0byA9ICRzY29wZS5wcm9kdXRvO1xuICAgICAgICAgICAgJHByb2R1dG8uY2F0ZWdvcmlhID0ge1xuICAgICAgICAgICAgICAgIHRpdHVsbzogJHNjb3BlLnByb2R1dG9Gb3JtLmNhdGVnb3JpYS50aXR1bG8sXG4gICAgICAgICAgICAgICAgY2F0ZWdvcmlhOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdHVsbzogJHNjb3BlLnByb2R1dG9Gb3JtLnN1YkNhdGVnb3JpYS50aXR1bG9cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICR1cGxvYWRcbiAgICAgICAgICAgIC51cGxvYWQoe1xuICAgICAgICAgICAgICAgIHVybDogJCgnbWV0YVtuYW1lPVwiYXBpXCJdJykuYXR0cignY29udGVudCcpICsgJ3Byb2R1dG8nLFxuICAgICAgICAgICAgICAgIGRhdGE6ICRwcm9kdXRvLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKHJlc3ApIHtcbiAgICAgICAgICAgICAgICAgICAgJGxvY2F0aW9uLnVybCgnL3Byb2R1dG9zJyk7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5sb2FkKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAocmVzcCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3RhdHVzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2RhbmdlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRXJybyBjYWRhc3RyYW5kbyBwcm9kdXRvLCB0ZW50ZSBub3ZhbWVudGUgbWFpcyB0YXJkZSdcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb2dyZXNzUGVyY2VudGFnZSA9IHBhcnNlSW50KDEwMC4wICogZXZ0LmxvYWRlZCAvIGV2dC50b3RhbCk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Byb2dyZXNzOiAnICsgcHJvZ3Jlc3NQZXJjZW50YWdlICsgJyUgJyArIGV2dC5jb25maWcuZGF0YS5maWxlLm5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEFwYWdhciBQcm9kdXRvXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaWRcbiAgICAgKi9cbiAgICAkc2NvcGUuZGVsZXRlID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIGlmIChjb25maXJtKCdWb2PDqiBkZXNlamEgcmVhbG1lbnRlIGFwYWdhciBvIHByb2R1dG8/XFxuRXN0ZSBwcm9jZWRpbWVudG8gw6kgaXJyZXZlcnPDrXZlbCEnKSkge1xuICAgICAgICAgICAgdmFyIHRvRGVsZXRlID0gJHNjb3BlLmxpbmhhcy5kYXRhW2lkXTtcblxuICAgICAgICAgICAgJGh0dHBcbiAgICAgICAgICAgICAgICAuZGVsZXRlKCQoJ21ldGFbbmFtZT1cImFwaVwiXScpLmF0dHIoJ2NvbnRlbnQnKSArICdwcm9kdXRvLycgKyB0b0RlbGV0ZS5faWQsIGNvbmZpZylcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdGF0dXMgPT0gMjA0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3RhdHVzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAncHJvZHV0byByZW1vdmlkbyBjb20gc3VjZXNzbyEnXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGluaGFzLmRhdGEuc3BsaWNlKGlkLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zdGF0dXMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2RhbmdlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0Vycm8gcmVtb3ZlbmRvIHByb2R1dG8sIHRlbnRlIG5vdmFtZW50ZSBtYWlzIHRhcmRlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEVkaXRhciBQcm9kdXRvXG4gICAgICovXG4gICAgJHNjb3BlLmVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciAkcHJvZHV0byA9ICRzY29wZS5wcm9kdXRvO1xuICAgICAgICAgICAgJHByb2R1dG8uY2F0ZWdvcmlhID0ge1xuICAgICAgICAgICAgICAgIHRpdHVsbzogJHNjb3BlLnByb2R1dG9Gb3JtLmNhdGVnb3JpYS50aXR1bG8sXG4gICAgICAgICAgICAgICAgY2F0ZWdvcmlhOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdHVsbzogJHNjb3BlLnByb2R1dG9Gb3JtLnN1YkNhdGVnb3JpYS50aXR1bG9cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICRodHRwXG4gICAgICAgICAgICAucHV0KCQoJ21ldGFbbmFtZT1cImFwaVwiXScpLmF0dHIoJ2NvbnRlbnQnKSArICdwcm9kdXRvLycgKyAkcm91dGVQYXJhbXMuaWQsICRwcm9kdXRvLCBjb25maWcpXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5zdGF0dXMgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJyxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ3Byb2R1dG8gYXR1YWxpemFkbyBjb20gc3VjZXNzbyEnXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5zdGF0dXMgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdkYW5nZXInLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnT2NvcnJldSB1bSBlcnJvIGF0dWFsaXphbmRvIG9zIGRhZG9zIGRvIHByb2R1dG8sIHRlbnRlIG5vdmFtZW50ZSBtYWlzIHRhcmRlJ1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVmlzdWFsaXphciBQcm9kdXRvXG4gICAgICovXG4gICAgJHNjb3BlLmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJGh0dHBcbiAgICAgICAgICAgIC5nZXQoJCgnbWV0YVtuYW1lPVwiYXBpXCJdJykuYXR0cignY29udGVudCcpICsgJ3Byb2R1dG8vJyArICRyb3V0ZVBhcmFtcy5pZCwgY29uZmlnKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHV0byA9IChkYXRhLmRhdGEuZGF0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU2VhcmNoIFByb2R1Y3RzXG4gICAgICovXG4gICAgJHNjb3BlLnNlYXJjaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdXJsID0gJCgnbWV0YVtuYW1lPVwiYXBpXCJdJykuYXR0cignY29udGVudCcpXG4gICAgICAgICAgICAgICAgKyAnYnVzY2EvJ1xuICAgICAgICAgICAgICAgICsgJz9wYWdlPScgKyAkc2NvcGUuY3VyUGFnZVxuICAgICAgICAgICAgICAgICsgJyZsaW1pdD0nICsgJHNjb3BlLnBhZ2VTaXplXG4gICAgICAgICAgICAgICAgKyAnJmJ1c2NhPScgKyAkc2NvcGUuYnVzY2FcbiAgICAgICAgICAgIDtcblxuICAgICAgICAkaHR0cFxuICAgICAgICAgICAgLmdldCh1cmwsIGNvbmZpZylcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUubGluaGFzID0gKHJlc3VsdC5kYXRhKTtcblxuICAgICAgICAgICAgICAgIHZhciBwYWdpbmFzID0gbmV3IEFycmF5KCk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpPTE7IGkgPD0gcmVzdWx0LmRhdGEucGFnZUNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgcGFnaW5hcy5wdXNoKGkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICRzY29wZS5wYWdpbmFzID0gcGFnaW5hcztcbiAgICAgICAgICAgIH0pO1xuICAgIH07XG59XG5cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdteUFwcC5wcm9kdXRvcycsIFsnbmdSb3V0ZScsICduZ0ZpbGVVcGxvYWQnXSlcblxuICAgIC5jb25maWcoWyckcm91dGVQcm92aWRlcicsIGZ1bmN0aW9uICgkcm91dGVQcm92aWRlcikge1xuICAgICAgICAkcm91dGVQcm92aWRlclxuICAgICAgICAgICAgLndoZW4oJy9wcm9kdXRvcycsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ21vZHVsZXMvcHJvZHV0b3MvaW5kZXguaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1Byb2R1dG9zQ29udHJvbGxlcidcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbignL3Byb2R1dG9zL2FkaWNpb25hcicsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ21vZHVsZXMvcHJvZHV0b3MvYWRkLmh0bWwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdQcm9kdXRvc0NvbnRyb2xsZXInXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oJy9wcm9kdXRvcy9lZGl0YXIvOmlkJywge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbW9kdWxlcy9wcm9kdXRvcy9lZGl0Lmh0bWwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdQcm9kdXRvc0NvbnRyb2xsZXInXG4gICAgICAgICAgICB9KVxuICAgICAgICA7XG4gICAgfV0pXG5cbiAgICAuY29udHJvbGxlcignUHJvZHV0b3NDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJHJvdXRlUGFyYW1zJywgJyRsb2NhdGlvbicsICckaHR0cCcsICdVcGxvYWQnLCBQcm9kdXRvc0NvbnRyb2xsZXJdKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
