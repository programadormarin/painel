<div ng-init="load()" class="col-lg-12">
    <div class="box">
        <div data-original-title="" class="box-header">
            <h2><i class="fa fa-shopping-cart"></i> <span class="break">&nbsp;</span>Carrinhos</h2>
        </div>

        <div class="box-content">
            <div ng-show="status" class="alert alert-{{ status.type }}">
                <button type="button" data-dismiss="alert" class="close">&times;</button>
                {{ status.message}}
            </div>

            <div ng-show="linhas.itemCount == 0" class="alert alert-warning">Você não possui nenhum carrinho</div>

            <table ng-show="linhas.itemCount" class="table table-striped table-bordered bootstrap-datatable datatable">
                <thead>
                <tr>
                    <th>Identificador</th>
                    <th>Ítens</th>
                    <th>Estado</th>
                    <th>Data de Cadastro</th>
                    <th>Valor Total</th>
                    <th class="col-md-1">Ações</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="carrinho in linhas.data">
                    <td><a ng-bind="carrinho._id" ng-click="open(carrinho)"></a></td>
                    <td ng-bind="carrinho.items.length"></td>
                    <td ng-bind="carrinho.status"></td>
                    <td class="center">{{ carrinho.cadastro | date: 'dd/MM/yyyy HH:mm' }}</td>
                    <td class="center" ng-bind="total | currency : 'R$ '"></td>
                    <td class="center">
                        <a class="btn btn-xs btn-default" ng-click="open(carrinho)"><i class="fa fa-search-plus"></i></a>
                        <a class="btn btn-xs btn-default"><i class="fa fa-shopping-cart"></i></a>
                        <a class="btn btn-xs btn-danger"><i class="fa fa-trash-o"></i></a>
                    </td>
                </tr>
                </tbody>
            </table>

            <ng-include src="'modules/pagination.html'"></ng-include>
        </div>
    </div>
</div>

<div class="modal fade" id="cartModal" tabindex="-1" role="dialog" aria-labelledby="cartModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title"><i class="fa fa-shopping-cart"></i><span class="break">&nbsp;</span>Carrinho de Compras</h4>
            </div>
            <div class="modal-body">
                <table class="table table-striped table-bordered bootstrap-datatable datatable">
                    <thead>
                        <tr>
                            <th>Ítens</th>
                            <th>Quantidade</th>
                            <th>Valor</th>
                            <th>Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="item in carrinho.items">
                            <td ng-bind="item.produto.titulo"></td>
                            <td ng-bind="item.quantidade"></td>
                            <td ng-bind="item.produto.valor | currency : 'R$ '"></td>
                            <td class="center" ng-bind="item.produto.valor * item.quantidade | currency : 'R$ '"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Fechar <i class="fa fa-sign-in"></i></button>
            </div>
        </div>
    </div>
</div>