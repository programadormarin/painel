"use strict";function ProdutosController(t,o,e,a,r){t.curPage=1,t.pageSize=12;var n={headers:{Authorization:localStorage.getItem("token"),Site:localStorage.getItem("site")}};t.load=function(){a.get($('meta[name="api"]').attr("content")+"produto?page="+t.curPage+"&limit="+t.pageSize,n).then(function(o){t.linhas=o.data;for(var e=new Array,a=1;a<=o.data.pageCount;a++)e.push(a);t.paginas=e})},t.categories=function(){a.get($('meta[name="api"]').attr("content")+"site/"+n.headers.Site,n).then(function(o){t.site=o.data.data})},t.add=function(){var o=t.produto;o.categoria={titulo:t.produtoForm.categoria.titulo,categoria:{titulo:t.produtoForm.subCategoria.titulo}},r.upload({url:$('meta[name="api"]').attr("content")+"produto",data:o,headers:n.headers}).then(function(o){e.url("/produtos"),t.load()},function(o){t.status={type:"danger",message:"Erro cadastrando produto, tente novamente mais tarde"}},function(t){var o=parseInt(100*t.loaded/t.total);console.log("progress: "+o+"% "+t.config.data.file.name)})},t["delete"]=function(o){if(confirm("Você deseja realmente apagar o produto?\nEste procedimento é irreversível!")){var e=t.linhas.data[o];a["delete"]($('meta[name="api"]').attr("content")+"produto/"+e._id,n).then(function(e){204==e.status?(t.status={type:"success",message:"produto removido com sucesso!"},t.linhas.data.splice(o,1)):t.status={type:"danger",message:"Erro removendo produto, tente novamente mais tarde"}})}},t.edit=function(){var e=t.produto;e.categoria={titulo:t.produtoForm.categoria.titulo,categoria:{titulo:t.produtoForm.subCategoria.titulo}},a.put($('meta[name="api"]').attr("content")+"produto/"+o.id,e,n).success(function(o){t.status={type:"success",message:"produto atualizado com sucesso!"}}).error(function(){t.status={type:"danger",message:"Ocorreu um erro atualizando os dados do produto, tente novamente mais tarde"}})},t.get=function(){a.get($('meta[name="api"]').attr("content")+"produto/"+o.id,n).then(function(o){t.produto=o.data.data})},t.search=function(){var o=$('meta[name="api"]').attr("content")+"busca/?page="+t.curPage+"&limit="+t.pageSize+"&busca="+t.busca;a.get(o,n).then(function(o){t.linhas=o.data;for(var e=new Array,a=1;a<=o.data.pageCount;a++)e.push(a);t.paginas=e})}}angular.module("myApp.produtos",["ngRoute","ngFileUpload"]).config(["$routeProvider",function(t){t.when("/produtos",{templateUrl:"modules/produtos/index.html",controller:"ProdutosController"}).when("/produtos/adicionar",{templateUrl:"modules/produtos/add.html",controller:"ProdutosController"}).when("/produtos/editar/:id",{templateUrl:"modules/produtos/edit.html",controller:"ProdutosController"})}]).controller("ProdutosController",["$scope","$routeParams","$location","$http","Upload",ProdutosController]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZXMvcHJvZHV0b3MvaW5kZXguanMiXSwibmFtZXMiOlsiUHJvZHV0b3NDb250cm9sbGVyIiwiJHNjb3BlIiwiJHJvdXRlUGFyYW1zIiwiJGxvY2F0aW9uIiwiJGh0dHAiLCIkdXBsb2FkIiwiY3VyUGFnZSIsInBhZ2VTaXplIiwiY29uZmlnIiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiU2l0ZSIsImxvYWQiLCJnZXQiLCIkIiwiYXR0ciIsInRoZW4iLCJyZXN1bHQiLCJsaW5oYXMiLCJwYWdpbmFzIiwiQXJyYXkiLCJpIiwiZGF0YSIsInBhZ2VDb3VudCIsInB1c2giLCJjYXRlZ29yaWVzIiwic2l0ZSIsImFkZCIsIiRwcm9kdXRvIiwicHJvZHV0byIsImNhdGVnb3JpYSIsInRpdHVsbyIsInByb2R1dG9Gb3JtIiwic3ViQ2F0ZWdvcmlhIiwidXBsb2FkIiwidXJsIiwicmVzcCIsInN0YXR1cyIsInR5cGUiLCJtZXNzYWdlIiwiZXZ0IiwicHJvZ3Jlc3NQZXJjZW50YWdlIiwicGFyc2VJbnQiLCJsb2FkZWQiLCJ0b3RhbCIsImNvbnNvbGUiLCJsb2ciLCJmaWxlIiwibmFtZSIsImlkIiwiY29uZmlybSIsInRvRGVsZXRlIiwiX2lkIiwic3BsaWNlIiwiZWRpdCIsInB1dCIsInN1Y2Nlc3MiLCJlcnJvciIsInNlYXJjaCIsImJ1c2NhIiwiYW5ndWxhciIsIm1vZHVsZSIsIiRyb3V0ZVByb3ZpZGVyIiwid2hlbiIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciJdLCJtYXBwaW5ncyI6IkFBQUEsWUFFQSxTQUFTQSxvQkFBb0JDLEVBQVFDLEVBQWNDLEVBQVdDLEVBQU9DLEdBQ2pFSixFQUFPSyxRQUFXLEVBQ2xCTCxFQUFPTSxTQUFXLEVBT2xCLElBQUlDLElBQ0FDLFNBQ0lDLGNBQWVDLGFBQWFDLFFBQVEsU0FDcENDLEtBQU1GLGFBQWFDLFFBQVEsU0FPbkNYLEdBQU9hLEtBQU8sV0FDVlYsRUFD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S0gsRUFHakJ0QixHQUFPb0IsUUFBVUEsS0FLakN5QyxRQUNLQyxPQUFPLGtCQUFtQixVQUFXLGlCQUVyQ3ZELFFBQVEsaUJBQWtCLFNBQVV3RCxHQUNqQ0EsRUFDS0MsS0FBSyxhQUNGQyxZQUFhLDhCQUNiQyxXQUFZLHVCQUVmRixLQUFLLHVCQUNGQyxZQUFhLDRCQUNiQyxXQUFZLHVCQUVmRixLQUFLLHdCQUNGQyxZQUFhLDZCQUNiQyxXQUFZLDBCQUt2QkEsV0FBVyxzQkFBdUIsU0FBVSxlQUFnQixZQUFhLFFBQVMsU0FBVW5FIiwiZmlsZSI6Im1vZHVsZXMvcHJvZHV0b3MvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIFByb2R1dG9zQ29udHJvbGxlciAoJHNjb3BlLCAkcm91dGVQYXJhbXMsICRsb2NhdGlvbiwgJGh0dHAsICR1cGxvYWQpIHtcbiAgICAkc2NvcGUuY3VyUGFnZSAgPSAxO1xuICAgICRzY29wZS5wYWdlU2l6ZSA9IDEyO1xuXG4gICAgLyoqXG4gICAgICogR2VuZXJhbCBjb25maWdcbiAgICAgKlxuICAgICAqIEB0eXBlIHt7aGVhZGVyczoge0F1dGhvcml6YXRpb24sIFNpdGV9fX1cbiAgICAgKi9cbiAgICB2YXIgY29uZmlnID0ge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSxcbiAgICAgICAgICAgIFNpdGU6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzaXRlJylcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDYXJyZWdhciBQcm9kdXRvc1xuICAgICAqL1xuICAgICRzY29wZS5sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkaHR0cFxuICAgICAgICAgICAgLmdldCgkKCdtZXRhW25hbWU9XCJhcGlcIl0nKS5hdHRyKCdjb250ZW50JykgKyAncHJvZHV0bz9wYWdlPScgKyAkc2NvcGUuY3VyUGFnZSArICcmbGltaXQ9JyArICRzY29wZS5wYWdlU2l6ZSwgY29uZmlnKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5saW5oYXMgPSAocmVzdWx0LmRhdGEpO1xuXG4gICAgICAgICAgICAgICAgdmFyIHBhZ2luYXMgPSBuZXcgQXJyYXkoKTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGk9MTsgaSA8PSByZXN1bHQuZGF0YS5wYWdlQ291bnQ7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBwYWdpbmFzLnB1c2goaSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJHNjb3BlLnBhZ2luYXMgPSBwYWdpbmFzO1xuICAgICAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENhcnJlZ2EgYXMgY2F0ZWdvcmlhcyBkbyBzaXRlXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2l0ZVxuICAgICAqL1xuICAgICRzY29wZS5jYXRlZ29yaWVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICRodHRwXG4gICAgICAgICAgICAuZ2V0KCQoJ21ldGFbbmFtZT1cImFwaVwiXScpLmF0dHIoJ2NvbnRlbnQnKSArICdzaXRlLycgKyBjb25maWcuaGVhZGVycy5TaXRlLCBjb25maWcpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5zaXRlID0gZGF0YS5kYXRhLmRhdGE7XG4gICAgICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ2FkYXN0cmFyIFByb2R1dG9cbiAgICAgKi9cbiAgICAkc2NvcGUuYWRkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgJHByb2R1dG8gPSAkc2NvcGUucHJvZHV0bztcbiAgICAgICAgICAgICRwcm9kdXRvLmNhdGVnb3JpYSA9IHtcbiAgICAgICAgICAgICAgICB0aXR1bG86ICRzY29wZS5wcm9kdXRvRm9ybS5jYXRlZ29yaWEudGl0dWxvLFxuICAgICAgICAgICAgICAgIGNhdGVnb3JpYToge1xuICAgICAgICAgICAgICAgICAgICB0aXR1bG86ICRzY29wZS5wcm9kdXRvRm9ybS5zdWJDYXRlZ29yaWEudGl0dWxvXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAkdXBsb2FkXG4gICAgICAgICAgICAudXBsb2FkKHtcbiAgICAgICAgICAgICAgICB1cmw6ICQoJ21ldGFbbmFtZT1cImFwaVwiXScpLmF0dHIoJ2NvbnRlbnQnKSArICdwcm9kdXRvJyxcbiAgICAgICAgICAgICAgICBkYXRhOiAkcHJvZHV0byxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVyc1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChyZXNwKSB7XG4gICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbi51cmwoJy9wcm9kdXRvcycpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubG9hZCgpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKHJlc3ApIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN0YXR1cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdkYW5nZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0Vycm8gY2FkYXN0cmFuZG8gcHJvZHV0bywgdGVudGUgbm92YW1lbnRlIG1haXMgdGFyZGUnXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9ncmVzc1BlcmNlbnRhZ2UgPSBwYXJzZUludCgxMDAuMCAqIGV2dC5sb2FkZWQgLyBldnQudG90YWwpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwcm9ncmVzczogJyArIHByb2dyZXNzUGVyY2VudGFnZSArICclICcgKyBldnQuY29uZmlnLmRhdGEuZmlsZS5uYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBcGFnYXIgUHJvZHV0b1xuICAgICAqXG4gICAgICogQHBhcmFtIGlkXG4gICAgICovXG4gICAgJHNjb3BlLmRlbGV0ZSA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICBpZiAoY29uZmlybSgnVm9jw6ogZGVzZWphIHJlYWxtZW50ZSBhcGFnYXIgbyBwcm9kdXRvP1xcbkVzdGUgcHJvY2VkaW1lbnRvIMOpIGlycmV2ZXJzw612ZWwhJykpIHtcbiAgICAgICAgICAgIHZhciB0b0RlbGV0ZSA9ICRzY29wZS5saW5oYXMuZGF0YVtpZF07XG5cbiAgICAgICAgICAgICRodHRwXG4gICAgICAgICAgICAgICAgLmRlbGV0ZSgkKCdtZXRhW25hbWU9XCJhcGlcIl0nKS5hdHRyKCdjb250ZW50JykgKyAncHJvZHV0by8nICsgdG9EZWxldGUuX2lkLCBjb25maWcpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuc3RhdHVzID09IDIwNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN0YXR1cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ3Byb2R1dG8gcmVtb3ZpZG8gY29tIHN1Y2Vzc28hJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxpbmhhcy5kYXRhLnNwbGljZShpZCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3RhdHVzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdkYW5nZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdFcnJvIHJlbW92ZW5kbyBwcm9kdXRvLCB0ZW50ZSBub3ZhbWVudGUgbWFpcyB0YXJkZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBFZGl0YXIgUHJvZHV0b1xuICAgICAqL1xuICAgICRzY29wZS5lZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgJHByb2R1dG8gPSAkc2NvcGUucHJvZHV0bztcbiAgICAgICAgICAgICRwcm9kdXRvLmNhdGVnb3JpYSA9IHtcbiAgICAgICAgICAgICAgICB0aXR1bG86ICRzY29wZS5wcm9kdXRvRm9ybS5jYXRlZ29yaWEudGl0dWxvLFxuICAgICAgICAgICAgICAgIGNhdGVnb3JpYToge1xuICAgICAgICAgICAgICAgICAgICB0aXR1bG86ICRzY29wZS5wcm9kdXRvRm9ybS5zdWJDYXRlZ29yaWEudGl0dWxvXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAkaHR0cFxuICAgICAgICAgICAgLnB1dCgkKCdtZXRhW25hbWU9XCJhcGlcIl0nKS5hdHRyKCdjb250ZW50JykgKyAncHJvZHV0by8nICsgJHJvdXRlUGFyYW1zLmlkLCAkcHJvZHV0bywgY29uZmlnKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3RhdHVzID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdwcm9kdXRvIGF0dWFsaXphZG8gY29tIHN1Y2Vzc28hJ1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3RhdHVzID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZGFuZ2VyJyxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ09jb3JyZXUgdW0gZXJybyBhdHVhbGl6YW5kbyBvcyBkYWRvcyBkbyBwcm9kdXRvLCB0ZW50ZSBub3ZhbWVudGUgbWFpcyB0YXJkZSdcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFZpc3VhbGl6YXIgUHJvZHV0b1xuICAgICAqL1xuICAgICRzY29wZS5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRodHRwXG4gICAgICAgICAgICAuZ2V0KCQoJ21ldGFbbmFtZT1cImFwaVwiXScpLmF0dHIoJ2NvbnRlbnQnKSArICdwcm9kdXRvLycgKyAkcm91dGVQYXJhbXMuaWQsIGNvbmZpZylcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1dG8gPSAoZGF0YS5kYXRhLmRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFNlYXJjaCBQcm9kdWN0c1xuICAgICAqL1xuICAgICRzY29wZS5zZWFyY2ggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHVybCA9ICQoJ21ldGFbbmFtZT1cImFwaVwiXScpLmF0dHIoJ2NvbnRlbnQnKVxuICAgICAgICAgICAgICAgICsgJ2J1c2NhLydcbiAgICAgICAgICAgICAgICArICc/cGFnZT0nICsgJHNjb3BlLmN1clBhZ2VcbiAgICAgICAgICAgICAgICArICcmbGltaXQ9JyArICRzY29wZS5wYWdlU2l6ZVxuICAgICAgICAgICAgICAgICsgJyZidXNjYT0nICsgJHNjb3BlLmJ1c2NhXG4gICAgICAgICAgICA7XG5cbiAgICAgICAgJGh0dHBcbiAgICAgICAgICAgIC5nZXQodXJsLCBjb25maWcpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmxpbmhhcyA9IChyZXN1bHQuZGF0YSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgcGFnaW5hcyA9IG5ldyBBcnJheSgpO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaT0xOyBpIDw9IHJlc3VsdC5kYXRhLnBhZ2VDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2luYXMucHVzaChpKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUucGFnaW5hcyA9IHBhZ2luYXM7XG4gICAgICAgICAgICB9KTtcbiAgICB9O1xufVxuXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbXlBcHAucHJvZHV0b3MnLCBbJ25nUm91dGUnLCAnbmdGaWxlVXBsb2FkJ10pXG5cbiAgICAuY29uZmlnKFsnJHJvdXRlUHJvdmlkZXInLCBmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIpIHtcbiAgICAgICAgJHJvdXRlUHJvdmlkZXJcbiAgICAgICAgICAgIC53aGVuKCcvcHJvZHV0b3MnLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtb2R1bGVzL3Byb2R1dG9zL2luZGV4Lmh0bWwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdQcm9kdXRvc0NvbnRyb2xsZXInXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oJy9wcm9kdXRvcy9hZGljaW9uYXInLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtb2R1bGVzL3Byb2R1dG9zL2FkZC5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnUHJvZHV0b3NDb250cm9sbGVyJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKCcvcHJvZHV0b3MvZWRpdGFyLzppZCcsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ21vZHVsZXMvcHJvZHV0b3MvZWRpdC5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnUHJvZHV0b3NDb250cm9sbGVyJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgO1xuICAgIH1dKVxuXG4gICAgLmNvbnRyb2xsZXIoJ1Byb2R1dG9zQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRyb3V0ZVBhcmFtcycsICckbG9jYXRpb24nLCAnJGh0dHAnLCAnVXBsb2FkJywgUHJvZHV0b3NDb250cm9sbGVyXSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
